(()=>{"use strict";const t=document.querySelector("#input-root-canvas"),e=document.querySelector("#output-root-canvas"),n=document.querySelector(".index"),i=document.querySelector(".radicant"),r=document.querySelector(".multiplier-output"),o=document.querySelector(".error-output"),a=document.querySelector(".index.root-output"),u=document.querySelector(".radicant.root-output"),c=new Error("root canvas context is null");function d(t){const e=t.width,n=t.height,i=t.getContext("2d");if(!i)throw c;l(t),t.style.display="block",i.beginPath(),i.moveTo(15,.5*n),i.lineTo(45,.5*n),i.lineTo(65,n),i.lineTo(80,5),i.lineTo(e,5),i.stroke()}function l(t){t.style.display="none";const e=t.width,n=t.height,i=t.getContext("2d");if(!i)throw c;i.clearRect(0,0,e,n)}function s(t,e){const n=e.length;return.55*h(t)*((n||1)-1)}function m(t,e,n){if(!e.dataset.minWidth)throw new Error("you should specify 'data-min-width' attribute on canvas element");const i=parseInt(e.dataset.minWidth);t.style.width=h(t)+n+"px",e.width=i+n,d(e)}function h(t){const e=getComputedStyle(t).fontSize;return parseInt(e.slice(0,-2))}function f(){try{const{index:s,radicant:m}={index:n.valueAsNumber,radicant:i.valueAsNumber};if(!Number.isNaN(s)&&!Number.isNaN(m)){const n=function(t,e){let n=1,i=1;if(function(t,e){if(t<1||t%2==0&&e<0)throw"input error"}(t,e),e<0&&(e=Math.abs(e),n=-1),1!=e&&0!=e&&1!=t)for(let r=2;r<=e;r++){let o=0;for(;e%r==0;)o++,o==t&&(n*=r,o=0),e/=r;i*=Math.pow(r,o)}else i=e;return{multiplier:n,index:t,radicant:i}}(s,m);t=e,1===(c=n).index&&(c.multiplier=c.radicant),function(t){return!(1===t.index||1===Math.abs(t.radicant))}(c)?(d(t),a.innerText=c.index+"",u.innerText=c.radicant+""):(l(t),a.innerText="",u.innerText=""),1===c.multiplier?r.innerHTML=1===c.radicant||0===c.radicant?c.radicant+"":"":-1===c.multiplier?r.innerHTML=1===c.radicant||0===c.radicant?"-"+c.radicant:"-":r.innerHTML=c.multiplier+"",o.innerHTML=""}}catch(t){l(e),a.innerText="",u.innerText="",r.innerHTML="",function(t){o.innerHTML=t}(t)}var t,c}d(t),d(e),i.addEventListener("keydown",(n=>{setTimeout((()=>{var n;(n=i).value.length>8&&(n.value=n.value.slice(0,-1));const r=s(i,i.value);if(m(i,t,r),f(),u.textContent){const t=s(u,u.textContent||"");m(u,e,t)}}),0)})),n.addEventListener("keydown",(t=>{setTimeout((()=>{f()}),0)}))})();